# This was generated by tool. Edits will be overwritten.

name: ignore-this-ci
on:
  workflow_dispatch:
  push:
    branches:
    - main
  pull_request:
    paths:
    - .github/workflows/ignore-this-ci
    - src/ignore-this/**
env:
  DOTNETT_NOLOGO: true
  DOTNET_CLI_TELEMETRY_OPTOUT: true
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: pwsh
        working-directory: ignore-this
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: Setup Dotnet
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: 8.0.x
    - name: Test
      run: dotnet test -c Release ignore-this/test/IgnoreThis.Tests --logger "console;verbosity=normal" --logger "trx;LogFileName=Tests.trx" --collect:"XPlat Code Coverage"
    - id: test-report
      name: Test report
      if: success() || failure()
      uses: dorny/test-reporter@v1
      with:
        name: Test Report
        path: ignore-this/test/IgnoreThis.Tests/TestResults/Tests.trx
        reporter: dotnet-trx
        fail-on-error: true
        fail-on-empty: true
    - name: Install Sectigo CodeSiging CA certificates
      run: "sudo apt-get update\r\nsudo apt-get install -y ca-certificates\r\nsudo cp build/SectigoPublicCodeSigningRootCrossAAA.crt /usr/local/share/ca-certificates/\r\nsudo update-ca-certificates             "
